# 前后端整合

## 时间

13点56分

## 负责

kony

## 内容

前后端整合我喊了一周半了，还是没做成

内容很多吗？

就一个登录，一个查课程表，一个选课，最多还有个退课。

我不理解，到底难度在哪，怎么就是整合不起来

没人搞那就我来搞

![image-20200717140041095](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140041095.png)

先试一下直接点按钮，结果出现了这个东西，网络繁忙请重试，访问直接失败了

原来是本地测试环境问题，改下端口号

![image-20200717140348886](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140348886.png)

![image-20200717140404913](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140404913.png)

ok，看来请求是发成功了

![image-20200717140603148](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140603148.png)

登录逻辑看来没问题，但是还是控制台有报错

看来是由于重复访问一个路由地址的原因

### vuerouter路由Avoided redundant navigation to current location Redirected when going from x to x naviga

https://blog.csdn.net/JackieDYH/article/details/106749781



![image-20200717140859498](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140859498.png)

看来没有重复访问一个路由 ‘/’，怎么会有问题呢

![image-20200717140932928](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717140932928.png)

原来是http请求拦截器的原因，我们压根就没有token，其实不用先弄拦截器，把这个给注释掉

![image-20200717141041974](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141041974.png)

报错消除



![image-20200717141207389](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141207389.png)

看着这个主界面。。有点点丑，以后再说，

去看看选课界面是什么样子

![image-20200717141234436](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141234436.png)

加载界面的动画不错

报了网络异常

![image-20200717141334353](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141334353.png)

首先是报错，indexMethod没定义，但在这里被引用了

![image-20200717141441854](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141441854.png)

原来是github上别人写的功能，在这里被注释掉了

那先不管它吧

先看看网络报错

![image-20200717141531347](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141531347.png)

服务器报400错误

![image-20200717141600631](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141600631.png)

应该是请求有问题

![image-20200717141724170](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141724170.png)

这个方法有错

[timelog]14点17分

![image-20200717141739739](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141739739.png)

一个get请求

params参数是param，看看

![image-20200717141811053](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141811053.png)

发的是一个pageInfo

![image-20200717141821150](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141821150.png)

包括startIndex，pageSize

![image-20200717141841913](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141841913.png)

而后端报错，需要的东西是start_index

改一下后端吧

![image-20200717141905730](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141905730.png)

![image-20200717141917686](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717141917686.png)

重新编译，试试看

![image-20200717142043366](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142043366.png)

这下请求成功了，但是还是页面里啥也没有

![image-20200717142437853](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142437853.png)

先别忘了改test类里的请求

都给他们说了好几天的面向接口编程，接口文档还是像没有一样

看看逻辑是什么样的

![image-20200717142138020](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142138020.png)

后端返回一个List，是两张表并起来的VO对象

![image-20200717142557073](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142557073.png)

看看毛毛，原来毛毛只做到这里，后面就啥也没有了

写吧

![image-20200717142632556](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142632556.png)

先看看打印出来的结果

![image-20200717142655565](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142655565.png)

ok，了解

我看看接下来该怎么做

[timelog]14点28分

![image-20200717142925210](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142925210.png)

先把所有的注释取消掉

再看看这里的数据类型

![image-20200717142959916](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717142959916.png)

我们先把loading给去掉

![image-20200717143033191](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143033191.png)

试试看

![image-20200717143113210](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143113210.png)

原作者引用了qs，但我们都给删掉了，这里把它注释掉

![image-20200717143242388](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143242388.png)

loading的面纱去掉了，但是这个东西排版贼丑

先不管，看看前端的数据类型

![image-20200717143357599](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143357599.png)

这里有个el-table

[timelog]14点34分

![image-20200717143513958](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143513958.png)

这是后端传回来的数据类型

![image-20200717143611290](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717143611290.png)

我们再来看看这个表格，其实不是很合理

有很多信息我们放不进去，比如教学楼，上课时间等等，可能需要大改

不过先插几个数据也无妨

[timelog]14点37分

![image-20200717144029317](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717144029317.png)

前端的课名叫Title，改掉

![image-20200717144217352](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717144217352.png)

选课人数应该是currentNum，改掉

![image-20200717144426072](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717144426072.png)

课程简介应该是description，改掉

![image-20200717144554432](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717144554432.png)

最后试一下把数据插进去

[timelog]14点46分

![image-20200717144637281](%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B4%E5%90%88.assets/image-20200717144637281.png)

终于有界面了，这里这个选课表单看起来是老师操作的表单，我裂开了，这组件乱用的

至少这样可以了

## 总结

我把他们一周半没做好的东西，用半个下午不到的时间做完了

：）
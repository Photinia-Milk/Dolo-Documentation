# back-end Docker镜像部署

## 时间

01点02分

## 负责

kony

## 内容

我从医院爬回来写代码了，兄弟们

这是今晚的日志，一直在共享屏幕解决问题，就没什么截图了，

每一步都卡了很久

这都是做完了才写的

他们的docker部署不上去

### Jenkins 403

首先是我jenkins 403错误了

问了一下，才知道，金珂今天答辩拿我的Jenkins账号登陆去了，现在整个服务器认证都只以他的session为准

那我裂开了，只好找金珂，改一下jenkins监听分支，变成develop

### Jenkinsfile 改动以及测试数据库改动

他们的测试数据库结构和数据都改动了

于是，我修改了Jenkinsfile，结果发现，有8个文件

我裂开了

于是，写了八个命令行，push上去

结果跑一下，跑不过

原因是因为字符集又不对，Mysql8和5差得太多了

联系兴宇，让他导出整个数据库，并且把字符集给改了

现在修改Jenkins，一遍编译通过

### Docker部署后，访问端口404错误

#### 安全组策略

我怀疑是安全组策略，于是开放了8081端口，结果还是404，检查了一下，原来被nginx代理到https里了，忘了配置nginx

### 配置Nginx后，访问/back-end/子路径500错误

怎么会500错误呢，小编也不知道呢，欢迎大家在评论区留言哦

查了半天，猛然反应过来docker网络是与主机隔离的，那么就需要改

#### 改后端连接为docker0网关

改好了，结果还是500错误

我在想，我们看不到控制台，要不要把日志给写了，那要写好多啊

结果突然想到，可不可以在docker容器里看到控制台上命令行呢？

#### 在docker容器里看控制台

##### docker部署springboot，并且查看运行日志

https://blog.csdn.net/qq_29611427/article/details/81534037	

sudo docker logs -f -t *--tail 行数 容器名*

一看，果然是jdbc连不上



金珂突然醒悟，他的密码有问题，猛然发现密码是金珂自己的密码，

裂开了，改掉

#### 改后端mysql连接密码

还是连不上，看来是网络还是有问题

试试看host部署

#### 镜像部署host模式

docker基本网络配置：docker0网络接口、bridge模式、host模式、none模式、Container模式

https://blog.csdn.net/weixin_44234846/article/details/100688569

反正最后都要做微服务，先不慌容器隔离的事